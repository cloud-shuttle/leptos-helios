<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Helios Visualization Library</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a1a;
            color: #ffffff;
        }
        #app {
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .loading {
            text-align: center;
        }
        .spinner {
            border: 4px solid #333;
            border-top: 4px solid #00d4ff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .chart-container {
            width: 800px;
            height: 600px;
            border: 1px solid #333;
            border-radius: 8px;
            background: #2a2a2a;
            margin: 20px;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="loading">
            <div class="spinner"></div>
            <p>Loading Helios Visualization Library...</p>
        </div>
    </div>
    <script type="module">
        import init, { greet, process_data, create_simple_chart, test_webgpu_support } from './helios.js';

        async function run() {
            try {
                // Initialize the WASM module
                await init();
                console.log('Helios loaded successfully');

                // Test the exported functions
                const greeting = greet('World');
                console.log(greeting);

                const processed = process_data('hello world');
                console.log(processed);

                const chart = create_simple_chart();
                console.log('Chart JSON:', chart);

                const webgpuSupport = test_webgpu_support();
                console.log('WebGPU Support:', webgpuSupport);

                // Display results on the page
                document.getElementById('app').innerHTML = `
                    <div class="loading">
                        <h1>üöÄ Helios Visualization Library</h1>
                        <p>‚úÖ WASM module loaded successfully!</p>
                        <p><strong>Greeting:</strong> ${greeting}</p>
                        <p><strong>Data Processing:</strong> ${processed}</p>
                        <p><strong>WebGPU Support:</strong> ${webgpuSupport ? '‚úÖ Supported' : '‚ùå Not Supported'}</p>
                        <div class="chart-container">
                            <h3>Sample Chart Configuration</h3>
                            <pre style="text-align: left; padding: 20px; overflow: auto; height: 400px;">${JSON.stringify(JSON.parse(chart), null, 2)}</pre>
                        </div>
                        <p><em>Built with Trunk + Rust + WebAssembly</em></p>
                    </div>
                `;
            } catch (error) {
                console.error('Error loading Helios:', error);
                document.getElementById('app').innerHTML = `
                    <div class="loading">
                        <h1>‚ùå Error Loading Helios</h1>
                        <p>Failed to load the WASM module:</p>
                        <pre style="color: #ff6b6b;">${error.message}</pre>
                    </div>
                `;
            }
        }

        run();
    </script>
</body>
</html>
